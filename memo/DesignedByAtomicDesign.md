# Atomic Design によるコンポーネント設計

Reactでは、まず小さなパーツごとにコンポーネントを実装し、そこからそれらを組み合わせたより複雑なコンポーネントを実装していく。
<br>

* コンポーネントの分割を適切に行う → __再利用性が向上__
* 共通のコンポーネントを整理して再利用 → __アプリ全体で一貫性のあるデザインを保つ__

プロジェクト全体で指標があると、分割の粒度やふるまいについて一定の合意のもとに開発ができる。それぞれのコンポーネントの役割が明確になるので、再利用性を高め、複数人での開発がしやすくなる。
<br>
<br>

## Presentational Component と ContainerComponent
<hr />

__見た目とふるまいを分離するためのコンポーネントのルール__<br>
これらを分離することで、それぞれの責務を明確に分けることができ、またテストやデバッグが容易になりコードの保守性が高まる。
<br>
<br>

### Presentational Component
<hr />

* 見た目を実装するコンポーネント
* __基本的にpropsで渡されたデータを元に適切なUIパーツを表示することだけをする。__
* スタイルの適用をこのコンポーネントで行う
* __内部に状態を持たせず、API呼び出しなどの副作用を実行しない__
* propsにのみ依存することで、同じpropsに対して常に同じものが表示されるため、デザインに関してデバッグが容易になる。
* デザインだけ修正したい場合も、振る舞いや外側の営業を考える必要がない。

<br>
<br>

### Container Component
<hr />

* デザインを一切実装せずに、ビジネスロジックの身を担う
* Hooksを持たせて、状態を使って表示内容を切り替える、APIコールなどの副作用を実行するなどの振る舞いを実装する。
* Container Componentが親としてビジネスロジックを担い、子のPresentaitional Componentは親から渡されたpropsをもとに表示のみを担う

```
Presentational Component と Container Componentに分けることで、見た目と挙動で責務を分けることができ、コードの可読性や保守性が向上する。
```

<br>
<br>

### Atomic Design
<hr/>
デザイン（デザインシステム）を構築するための方法論。

* デザインシステム ... 統一感のある、効率的なデザインのためのシステム。デザインの指針の言語化、ビジュアルセットなど。

<br>
デザインを5つの階層に分ける。

|  階層名  |  説明  |  例  |
| ---- | ---- | ---- |
|  Atoms  |  最小の要素。これ以上分割できない  |  ボタン、テキスト  |
|  Molecules  |  複数のAtomsを組み合わせて構築   |  ラベル付きのテキストボックス  |
|  Organisms  |  Moleculesよりもより具体的な要素  |  入力フォーム  |
|  Templates  |  ページ全体のレイアウト  |  ページのレイアウト  |
|  Pages  |  ページそのもの  |  ページそのもの  |
<br>
Reactなどのコンポーネント開発と相性が良く、Atomic Designは広く用いられる。

```
Atomic Designはデザインで使われている方法論で、特定のフレームワークなどを強く意識したものではない。このため、それぞれの階層でプログラム的にどういった役割・振る舞いを持つべきかは定義されていない。Reactのコンポーネントの分類で使用する際には、それぞれの階層でどういった役割を持つか定義する必要がある。
```
<br>
<br>

### 1. __Atoms__
<hr />

* 基本的に状態や振る舞いを持たず、文章、色、大きさなどの描画に必要なパラメータはpropsから受け取る。
* 大きさも親から制御できるようにするため、propsを使ったり、CSSで親要素の大きさに依存させたりするように実装する。
* Atomsで定義したコンポーネントは汎用的に利用されることが多いため、特定のドメイン知識に依存しないコンポーネントを実装する。

例)<br>
画像表示するコンポーネントを実装する際に、Atomでは画像URLを含むユーザーオブジェクトを渡すのではなく、画像のURLという必要なデータのみをAtomに渡す。
<br>
<br>

### 2. __Molecules__
<hr />

* 基本的には状態や振る舞いを持たず、汎用的に使うため必要なデータは親から渡すようにする。
* 複数のAtomsを配置して、必要なデータを子コンポーネントに私、それぞれの位置関係をCSSで指定する。
* 1つの役割を持ったUIのみを実装する。 __複数の役割を持つ場合は大きすぎる。__
<br>
<br>

### 3. __Organisms__
<hr />

* サインインフォームやヘッダーなどのより具体的なUIコンポーネントを実装する
* ここではドメイン知識に依存したデータを受け取ったり、Contextを参照したり、独自の振る舞いを持つことができる。
* 状態を持たせるなど副作用を実装する際は、見た目を __Presentaitional Component__ に実装し、ロジック部分を __Container Component__ に実装する。 → 1つの階層でも複数のファイルで実装されることがある。
<br>
<br>

### 4. __Templates__
<hr />

* ページ全体のレイアウトを実装
* 複数のOrganism以下のコンポーネントを配置し、それぞれをCSSでレイアウトするといった役割を担う
<br>
<br>

### 5. __Pages__
<hr />

* 最上位のコンポーネントでページ単位のUIコンポーネントを実装する。
* レイアウトは __Template__ で実装しているので、ここでは状態の管理、router関数の処理、APIコールなどの副作用の実行、Contextに値を渡すなど振る舞いに関するものを実装する。
* Next.jsではページが最上位コンポーネントになっているので、Next.jsのページコンポーネントで __Pages__ を実装する。

